<div class="step row">
  <div class="col-md-6">
    <h3>選擇參加課程</h3>
    <p>Lorem ipsum dolor sit amet, in porro albucius qui, in nec quod novum accumsan, mei ludus tamquam dolores id. No sit debitis meliore postulant, per ex prompta alterum sanctus, pro ne quod dicunt sensibus.</p>
    <ul id="stages" class="data-list-2 clearfix">
      <li><%= f.radio_button :stage_id, nil, class: 'check_radio', data: {title: '', description: ''} %><label>只是感興趣，不確定想參加哪堂課</label></li>
      <% @course.stages.each do |stage| %>
      <li><%= f.radio_button :stage_id, stage.id, class: 'check_radio', data: {title: stage.title, description: stage.description} %><label> <%= stage.title %></label></li>
      <% end %>
    </ul>  
  </div>
  <div class="col-md-6">
    <h3 id="stage_title"></h3>
    <p id="stage_description"></p>
    <ul id="schedules" class="data-list-2 clearfix">
      <% @course.schedules.available.each do |schedule| %>
      <%= content_tag :li, class: "stage_#{schedule.stage.id}" do %>
      <%= f.radio_button :schedule_id, schedule.id, class: 'check_radio' %><label> <%= schedule.date %></label>
      <% end %>
      <% end %>
    </ul>
  </div>
</div><!-- end step -->
<% content_for :append_body do %>
<script>
  $('#stages input:radio').on('ifChecked', function(e){
    console.log(e, this, this.value, this.dataset.title);
    var stage_class = '.stage_' + this.value;
    $('#stage_title').text(this.dataset.title);
    $('#stage_description').text(this.dataset.description);
    $(stage_class).show();
    $('#schedules li').not(stage_class).hide();
  });
</script>
<% end %>